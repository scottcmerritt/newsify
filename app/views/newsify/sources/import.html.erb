<div class="row">
	<div class="col-6">
		<h2>Import articles: (<%= Newsify::Source.count %>)</h2>

		<div class="row">
			<div class="col-6">
				<h6>Select a pre-saved term</h6>
				<%= form_for :news, url:newsify.sources_import_path, method: :get do |f| %>
				<%= f.select(:term, @terms) %>
				<%= f.submit %>
				<% end %>
			</div>
			<div class="col-6">
				<h6>Or enter a custom term</h6>
				<%= form_for :news, url:newsify.sources_import_path, method: :get do |f| %>
				<%= f.text_field :term %>
				<%= f.submit %>
				<% end %>
			</div>
		</div>

		<% if @step == 2 %>
			<div class="alert alert-success mt-2">
				News sources successfuly imported
				<%= link_to "Group similar stories",newsify.sources_similar_path, class: "btn btn-primary btn-sm mx-1" rescue "Similar stories link error" %>
			</div>
		<% end %>
	</div>
	<div class="col-6">
		<h4>Recent imports</h4>
		<% @imports.each do |import| %>
		<div class="bg-white p-1 border-bottom d-flex justify-content-between">
			<div>
				<div style="width:40px;" class="badge badge-info text-dark"><%= import.import_sources.count rescue "Error:import_sources.count" %></div>

			<b><%= link_to import.keyword,newsify.sources_imported_path(import_id: import.id) %></b> by <% if import.user.nil? %>Auto importer<% else %><%= link_to import.user.respond_to?(:username) ? import.user.username : import.user.email, newsify.user_path(import.user) %><% end %>
			</div>
			<div class="justify-content-end fs-7"><%= time_ago_in_words import.created_at %> ago
			<span import-id="<%= import.id %>">
				<%= link_to "Classify", newsify.sources_import_classify_path(import_id: import.id), remote: Newsify::Import.all.first.respond_to?(:delay) %>
			</span>

			[<%= import.import_pct %>]
			<%= import.import_pct.blank? ? "Not started" : (import.import_pct == 100 ? "100%" : "#{num_format(import.import_pct*100,1)}%") rescue "Error.import_pct" %>
			</div>
		</div>
		<% end %>

	</div>
</div>